
def MyFile{name:String}
    def open(name:String):MyFile
        say "Opening file '$name'"
        return MyFile{name}

    def close(f:MyFile)
        say "Closing file $f"

with MyFile.open("first")
    say "Automatic .close()ing:"

say ""

with f := MyFile.open("second")
    say "$:f Automatic .close()ing:"

say ""

with f := MyFile.open("third") then say "Not closing $f"
    say "$:f custom cleanup:"
